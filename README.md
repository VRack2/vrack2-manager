# VRack2 Manager

Интерфейс для администрирования VRack2.

![example](./iface.png)

 - [VRack2](https://github.com/VRack2/vrack2) - Основной репозиторий
 - [VGranite](https://github.com/VRack2/VGranite) - Сервис для создания туннелей Socket -> Serial
 - [VRack2-Core](http://github.com/VRack2/vrack2-core) - Фреймворк для создания событийно-ориентированных сервисов на JavaScript/TypeScript
 - [VRack-Remote](https://github.com/VRack2/vrack2-remote) - Библиотека для связи с VRack2 которую использует VRack2 Manager

## Установка

Самый простой способ запустить VRack2 Manager - открыть его как статику.

**Скачайте** последний резил интерфейса в [списке релизов](https://github.com/VRack2/vrack2-manager/releases)

**Распакуйте** содержимое в папку и **откройте** `index.html` в браузере (Firefox/Chrome/etc)

## Сборка

### Склонируйте репозиторий

```
git clone https://github.com/VRack2/vrack2-manager
```

### Смените директорию 

```
cd ./vrack2-manager
```

### Установите зависимости

```
npm install
```

### Запустите менеджер

```
npm run serve
```

## Установка как сервис VRack2

Вы можете установить VRack2 Manager и настроить сервер статики как сервис VRack2. Подразумевается что у вас уже установлен VRack2 по стандартному пути.

### Клонируем репозиторий в `/opt`

```
cd /opt
git clone https://github.com/VRack2/vrack2-manager
```

### Переходим в директорию VRack2 Manager

```
cd /opt/vrack2-manager
```

### Устанавливаем зависимости

```
npm install
```

### Билдим статику 

```
npm run build
```

Теперь у нас появилась директория `dist` внутри `/opt/vrack2-manager`, там у нас лежит статические файлы интерфейса. 

Но нам нужно предоставить эти файлы через HTTP сервер статики. В этом нам поможет устройство **HTTPStaticServer** из набора `vrack2-net`

### Устанавливаем VRack2 Net устройства

```
cd /opt/vrack2-service/devices/
git clone https://github.com/VRack2/vrack2-net.git
```

### Устанавливаем зависимости VRack2 Net

Вы можете не устанавливать зависимости, если не хотите использовать другие устройства этого набора, сам **HTTPStaticServer** зависимостей не имеет.

```
cd /opt/vrack2-service/devices/vrack2-net
npm install
```

Теперь нам нужно скопировать готовые файлы сервиса для статики

### Копируем файлы сервиса

```
cp -a /opt/vrack2-manager/services/. /opt/vrack2-service/services
```

Файлы сервиса настроены на автозапуск, но он может не запуститься или выдать ошибку если порт будет занят. 

Отредактируйте при необходимости файл `/opt/vrack2/services/v2m-http.json`, в параметре `"port": 8088` укажите точно свободный порт.

### Перезапуск VRack2 

```
service vrack2 restart
```

Теперь, если вы все сделали правильно и все этапы прошли успешно, на порту 8088 вашего сервера будет доступен VRack2 Manager


## Описание интерфейса

После подключения к VRack2 вы увидите интерфейс для работы с разными инструментами и сервисами. Ниже приведено описание основных функций 

![iface-help](./docs/iface-help.png)

 1. Переход обратно - к менеджеру соединений
 2. Информация о сервере, потребление памяти и сетевая активность
 3. Менеджер ключей - добавление/удаление ключей доступа
 4. Менеджер устройств - отображает доступные устройства и их информацию
 5. Структура сервиса самого VRack2
 6. Документация на динамическое основное API VRack2
 7. Обновление списка сервисов
 8. Выбор конкретного сервиса
 9. Управление сервисом - проверка/запуск/остановка/перезапуск/удаление ошибок сервиса
 10. Основная информация о сервисе, пути до файлов, потребление памяти
 11. Критические ошибки сервиса
 12. Структура конкретного сервиса
 13. Документация на динамическое API конкретного сервиса
 14. Выбор конкретного устройства конкретного выбранного сервиса (флаг "М" означает наличие метрик а флаг "А" наличие экшенов)
 15. Информация о выбранном устройстве, его сервис и путь
 16. Вкладки для работы с устройством - Информация/Порты/События и Shares данные/Экшены/Метрики
 17. Локальная схема соединения устройства
 18. Более подробная информация о устройстве
 19. Кнопка переключения **Консоли**
  
-----

**Что бы не терять данные и не выполнять одни и теже действия - пользуйтесь консолью**, см. пункт 19. Она предназначена именно для того, что бы раз в сессию подписываться на нужные каналы и экшены и выполнять их и отслеживать в рамках одной сессии

----